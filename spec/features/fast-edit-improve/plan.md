# Implementation Plan

**Plan:** На странице редактирования меню внедрить inline-поле быстрого ввода с синхронизацией с текущей модалкой правок, обеспечить анимацию и управление состоянием, не нарушая существующую архитектуру Nuxt/Tailwind.

## Data sources / schemas

- Хранить временные правки в локальном состоянии Vue (например, `ref`/`reactive`) внутри компонента списка блюд или composable; структура: массив объектов `{ id блюда, draftNotes: string[] }` и отдельное поле `pendingInput` для несохранённого текста.
- Обновить схему данных модалки так, чтобы она принимала массив строк по каждому блюду; при открытии модалки передавать аккумулированные записи из состояния.
- Не затрагивать серверные схемы: правки отправляются существующим запросом; убедиться, что формирование payload учитывает новые массивы заметок.

## Contracts and interfaces

- Обновить интерфейс props/emit компонента модалки правок, чтобы принимать список строк и событие очистки/подтверждения.
- Ввести новый UI-компонент мини-поля (или расширить существующий) с пропсами: `modelValue`, `onSave`, `onCancel`, `onOpenModal`, `isSaving`.
- Гарантировать, что событие сохранения триггерится только явной кнопкой «Сохранить»; предусмотреть визуальное подтверждение успешной записи и обработку ошибок.

## Architecture / Components

- Модифицировать компонент страницы меню: добавить состояние для активного мини-поля, методы сохранения заметок, открытия модалки и сброса несохранённого текста.
- Реализовать анимацию появления мини-поля с помощью Tailwind transitions + `@vueuse/motion` (если уже используется) либо CSS transitions (`transition-all`, `transform`, `opacity`).
- Добавить кнопки: «Сохранить» внутри мини-поля, «Свернуть»/иконка закрытия, «К модалке» или аналогичная CTA для открытия окна из inline-режима.
- Обновить маршрутизацию фокуса: при открытии мини-поля устанавливать фокус в input, после сохранения переводить фокус на список или кнопку, предоставляя клавиатурный доступ к кнопке «Сохранить».
- Обеспечить хранение заметок при переключении блюда: перед переключением сохранять массив в общую структуру; несохранённый ввод переносить в `pendingInput` и показывать при повторном открытии.

## Risks

- Пользователь может забыть нажать «Сохранить» перед закрытием или переключением блюда — нужны подсказки/индикаторы о несохранённом вводе.
- Анимация может конфликтовать с layout на мобильных — протестировать на разных ширинах, предусмотреть ограничение ширины и overflow.
- Увеличение количества элементов управления может запутать пользователя — провести UX-проверку, использовать чёткие подписи и иконки.

## Assumptions

- В проекте уже есть система уведомлений или простой способ показать ошибку валидации.
- Страница редактирования меню построена на компонентах, которые можно расширить без существенной переработки API.
- Нет необходимости поддерживать оффлайн-сохранение правок между сессиями.
